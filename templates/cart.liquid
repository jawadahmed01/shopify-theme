{% if cart.item_count > 0 %}
  <div class="cart-page">
    <h1>Your Shopping Cart</h1>

    <form action="/cart" method="post" novalidate>
      <table class="cart-table">
        <thead>
          <tr>
            <th>Product</th>
            <th>Price</th>
            <th>Quantity</th>
            <th>Total</th>
            <th>Remove</th>
          </tr>
        </thead>
        <tbody>
          {% for item in cart.items %}
            <tr class="cart-item">
              <td>
                <div class="cart-item-info">
                  <img src="{{ item.image | img_url: '80x80' }}" alt="{{ item.title }}">
                  <div>
                    <a href="{{ item.url }}">{{ item.product.title }}</a>
                    {% if item.variant.title != 'Default Title' %}
                      <p>{{ item.variant.title }}</p>
                    {% endif %}
                  </div>
                </div>
              </td>
              <td>{{ item.price | money }}</td>
              <td>
                <input
                  type="number"
                  name="updates[]"
                  value="{{ item.quantity }}"
                  min="0"
                  data-line="{{ forloop.index }}"
                  class="quantity-input"
                >
              </td>
              <td>{{ item.line_price | money }}</td>
              <td>
                <a href="/cart/change?line={{ forloop.index }}&quantity=0" class="remove-btn">Remove</a>
              </td>
            </tr>
          {% endfor %}
        </tbody>
      </table>

      <div class="cart-footer">
        <div class="cart-subtotal">
          <p>
            Subtotal: <span>{{ cart.total_price | money }}</span>
          </p>
        </div>
        <div class="cart-buttons">
          <button type="submit" name="update" class="update-btn">Update Cart</button>
          <button type="submit" name="checkout" class="checkout-btn">Checkout</button>
        </div>
      </div>
    </form>
  </div>
{% else %}
  <div class="empty-cart">
    <h2>Your cart is empty</h2>
    <a href="/collections/all" class="continue-shopping">Continue Shopping</a>
  </div>
{% endif %}
